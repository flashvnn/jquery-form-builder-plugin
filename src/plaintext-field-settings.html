<!--
* Plain Text Field Settings panel design.
*
* Revision: @REVISION
* Version: @VERSION
* Copyright 2011 Lim Chee Kin (limcheekin@vobject.com)
*
* Licensed under Apache v2.0 http://www.apache.org/licenses/LICENSE-2.0.html
*
* Date: 17-Jan-2011
 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Plain Text Field Settings</title>
<script type="text/javascript" src="../lib/js/jquery-1.4.4.min.js"></script>
<script type="text/javascript" src="../lib/js/jquery-ui-1.8.7.custom.min.js"></script>
<script type="text/javascript" src="../lib/js/jquery.fontpicker-regios.js"></script>
<script type="text/javascript" src="js/jquery.colorpicker.js"></script>
<link type="text/css" href="../lib/css/smoothness/jquery-ui-1.8.7.custom.css" media="screen" rel="stylesheet" /> 
<link type="text/css" href="../lib/css/uni-form.css" media="screen" rel="stylesheet" />  
<link type="text/css" href="../lib/css/default.uni-form.css" media="screen" rel="stylesheet" />  
<!--DEV--><link type="text/css" href="css/jquery.formbuilder.core.css" media="screen" rel="stylesheet" />  
<!--DEV--><link type="text/css" href="css/jquery.formbuilder.plaintext.css" media="screen" rel="stylesheet" />  
<link type="text/css" href="../lib/css/fontpicker.css" media="screen" rel="stylesheet" /> 
<link type="text/css" href="css/jquery.colorpicker.css" media="screen" rel="stylesheet" /> 

<script type="text/javascript">
$(function(){
	$('#paletteTabs').tabs();
	$('#fontselector').fontPickerRegios({ 
		defaultFont: 'Tahoma',	
		callbackFunc: changeFont
	});
	
	$('<input type="text" id="backgroundColor" size="6" value="000000"/>').appendTo('#colorPicker').colorPicker({
	    ico:    '../images/jquery.colourPicker.gif', 
	    title:    "Basic Colors",
	});		
	$('#fontColor').colorPicker({
	    ico:    '../images/jquery.colourPicker.gif', 
	    title:    "Web Safe Colors",
	    type: 'webSafe',
	    width: 360
	});		
	var $builderFormFieldset = $('#builderForm fieldset');
	$builderFormFieldset.sortable({ 
		/*placeholder: 'ui-state-highlight',*/
		axis: 'y',
		cursor: 'move',
		helper: function (event, ui) {
			return $(ui).clone().css({
				opacity: 0.6,
				border: "3px solid #cccccc"
			});
		},
		start: function (event, ui) {
			var $previousElement = $(ui.item).prev();
			if ($previousElement.attr('id')) {
				ui.item.prevId = $previousElement.attr('id');
				ui.item.originalPositionTop = $previousElement.position().top;
				// alert('ui.item.originalPositionTop = ' + ui.item.originalPositionTop);
			}
		},
		update: function (event, ui) {
			alert('ui.position.top = ' + ui.position.top + ', ui.offset.top = ' + ui.offset.top);
			var $uiItem = $(ui.item);
			var $elements;
			var moveDown = ui.position.top > ui.item.originalPositionTop;
			if (ui.item.prevId) {
				if (moveDown) {
			    $elements = $uiItem.prevUntil('#' + ui.item.prevId);
				} else {
					$elements = $uiItem.nextUntil('#' + ui.item.prevId);
					// process the last one $('#' + ui.item.prevId) 
				}
			} else {
				$elements = $uiItem.prevAll();
			}
			$elements.each(function(index) {
				alert($(this).find('.text').text());
			});			
		}	
	});
	// Making text elements, or elements that contain text, not text-selectable.
	$builderFormFieldset.disableSelection();
});

function changeFont(fontFamily)
{	  
  alert (fontFamily + " selected.");
  // $('#sampletext').css('fontFamily', fontFamily);  
}
</script>

<style type="text/css">
  #backgroundColor { width:9em }
  .ui-state-highlight { height: 4.3em; line-height: 4em; }    
</style>
</head>
<body>
<div id="container">
  <div id="header"><h1>Plain Text Field Settings</h1></div>
  <div id="builderPalette">
     <div class="floatingPanelIdentifier"></div>
     <div class="floatingPanel">
			<div id="paletteTabs">
				<ul>
					<li><a href="#fieldSettings">Field Settings</a></li>
				</ul>
				<div id="fieldSettings">
					<fieldset class="language">
					<legend>Language: <select><option value="en">English</option></select></legend>
					<div class="clear labelOnTop">
						<label for="text">Text (?)</label><br/>
						<input type="text" id="text" />
					</div>
					<div class="2cols">
						<div class="labelOnTop col1 noPaddingBottom">
							<label for="horizontalAlignment">Horizontal Align (?)</label><br/>
							<select id="horizontalAlignment">
								<option value="leftAlign">left</option>
								<option value="centerAlign">center</option>
								<option value="rightAlign">right</option>
							</select>
						</div>
						<div class="labelOnTop col2 noPaddingBottom">
							<label for="verticalAlignment">Vertical Align (?)</label><br/>
							<select id="verticalAlignment">
								<option value="topAlign">top</option>
								<option value="middleAlign">middle</option>
								<option value="bottomAlign">bottom</option>
							</select>
						</div>	
					</div>
					</fieldset>
					<div class="general">
						<div class="2cols">
							<div class="labelOnTop col1 noPaddingBottom">
								<label for="name">Name (?)</label><br/>
					      <input type="text" id="name" />
							</div>
							<div class="labelOnTop col2">
								<label for="backgroundColor">Background Color (?)</label><br/>
								<div id="colorPicker"></div>
							</div>	
						</div>
						<div class="2cols">
							<div class="labelOnTop col1 noPaddingBottom">
								<label for="name">Font (?)</label><br/>
					      <div id="fontselector"></div>
							</div>
							<div class="labelOnTop col2">
								<label for="fontColor">Font Color (?)</label><br/>
					      <input id="fontColor" type="text" size="6" />
							</div>	
						</div>
					</div>				
				</div>
			</div>     
     </div>
  </div>
  <div id="builderPanel">
		<form id="builderForm" action="#" class="uniForm">
		  <fieldset>
				<div id="plainText1" class="ctrlHolder topAlign">
				<a href="#" class="ui-corner-all closeButton"><span	class="ui-icon ui-icon-close">delete this widget</span></a>
				<div class="PlainText">
			  Panel 1
				</div>
				</div>
				<div id="plainText2" class="ctrlHolder bottomAlign">
				<a href="#" class="ui-corner-all closeButton"><span	class="ui-icon ui-icon-close">delete this widget</span></a>
				<div class="PlainText">
        Panel 2
				</div>
				</div>	
				<div id="plainText3" class="ctrlHolder middleAlign">
				<a href="#" class="ui-corner-all closeButton"><span	class="ui-icon ui-icon-close">delete this widget</span></a>
				<div class="PlainText">
Panel 3
				</div>
				</div>							
</fieldset>
		</form>	  
  </div>		    
</div>
</body>
</html>